const main1=async()=>{const t=MineTm.Mine;let e;MineTm.isMobile&&((t,e={},n)=>{const{maxTimeBetweenTaps:a=300,maxDistanceBetweenTaps:o=20,holdThreshold:s=300,fanRadius:i=50,terminalColor:l="rgba(80, 200, 120, 0.85)",nonTerminalColor:r="rgba(66, 165, 245, 0.75)",dualPurposeColor:c="rgba(255, 193, 7, 0.85)",defaultColor:d="rgba(45, 45, 50, 0.85)",highlightColor:u="rgba(255, 171, 64, 0.9)"}=e;let p,m=0,y=0,h=0,g=0,f=!1,x=null,v=[],b=null,T=null,w=null,C=null;const E=/iPhone|iPad|iPod/i.test(navigator.userAgent),M=E||/Android/i.test(navigator.userAgent);if(E){const t=document.createElement("style");t.id="ios-text-block",t.innerHTML="\n        body.gesture-active,\n        body.gesture-active * {\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          -webkit-touch-callout: none !important;\n        }\n      ",document.head.appendChild(t)}const k=t=>{t?document.body.classList.add("gesture-active"):document.body.classList.remove("gesture-active")},L=()=>{x&&(x.style.transition="opacity 0.3s ease-out",x.style.opacity="0",setTimeout(()=>{x.style.display="none",x.style.opacity="1",x.style.transition="",k(!1)},300),f=!1,b=null,v=[],T=null)},A=t=>{if(!C)return[];if(0===t.length){const t=new Set;return Object.values(C).forEach(e=>t.add(e.split("+")[0])),Array.from(t)}const e=new Set;return Object.values(C).forEach(n=>{const a=n.split("+");a.length>t.length&&a.slice(0,t.length).every((e,n)=>e===t[n])&&e.add(a[t.length])}),Array.from(e)},F=(t,e,n=[])=>{const a=x||(x=document.createElement("div"),x.style.cssText="\n        position: fixed;\n        z-index: 999999;\n        pointer-events: none;\n        display: none;\n        opacity: 1;\n      ",document.body.appendChild(x),x);a.innerHTML="",a.style.display="block",a.style.opacity="1",a.style.left=`${t}px`,a.style.top=`${e}px`;let o=A(n);if(o.sort((t,e)=>t.localeCompare(e)),!document.getElementById("fanAnimationStyles")){const t=document.createElement("style");t.id="fanAnimationStyles",t.textContent="@keyframes fanOptionAppear{from{transform:translate(-50%,-50%) scale(0.8);opacity:0;}to{transform:translate(-50%,-50%) scale(1);opacity:1;}}",document.head.appendChild(t)}o.forEach((t,e)=>{const o=(t=>{const e=t.toLowerCase(),n="abcdefghijklmnopqrstuvwxyz".indexOf(e);return-1===n?0:2*Math.PI*n/26-Math.PI/2})(t),s=[...n,t],u=(t=>!!C&&Object.values(C).some(e=>{const n=e.split("+");return n.length===t.length&&n.every((e,n)=>e===t[n])}))(s),p=(t=>!!C&&Object.values(C).some(e=>{const n=e.split("+");return n.length>t.length&&n.slice(0,t.length).every((e,n)=>e===t[n])}))(s),m=(t=>{if(!C)return null;for(const[e,n]of Object.entries(C)){const a=n.split("+");if(a.length===t.length&&a.every((e,n)=>e===t[n]))return e}return null})(s);let y=d;u&&p?y=c:u?y=l:p&&(y=r);const h=Math.cos(o)*i,g=Math.sin(o)*i,f=document.createElement("div");Object.assign(f.dataset,{key:t,index:e,path:s.join("+"),isTerminal:u.toString(),isNonTerminal:p.toString(),action:m||""});const x=40-2*n.length;if(f.setAttribute("data-default-size-px",x),f.style.cssText=`\n          position: absolute;\n          width: ${x}px;\n          height: ${x}px;\n          background-color: ${y};\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          transform: translate(-50%, -50%) scale(0.8);\n          left: ${h}px;\n          top: ${g}px;\n          transition: all 0.15s ease-out;\n          opacity: 0;\n          animation: fanOptionAppear 0.15s forwards;\n          pointer-events: auto;\n          text-align: center;\n          box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        `,f.innerText=t,a.appendChild(f),u&&m){const e=document.createElement("div");e.style.cssText=`\n            position: absolute;\n            background-color: rgba(30,30,35,0.95);\n            color: rgba(240,240,240,1);\n            padding: 4px 10px;\n            border-radius: 4px;\n            font-size: 12px;\n            white-space: nowrap;\n            pointer-events: none;\n            opacity: 0;\n            transition: opacity 0.2s ease-out;\n            top: ${g-60}px;\n            left: ${h}px;\n            transform: translateX(-50%);\n            z-index: 10;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          `,e.innerText=m,e.dataset.titleFor=t,a.appendChild(e)}})},P=t=>t.touches&&t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},S=(t,e)=>{if(!f||!x||!C)return;const n=document.elementsFromPoint(t,e).filter(t=>t.dataset&&void 0!==t.dataset.key);if(T){const t="true"===T.dataset.isTerminal,e="true"===T.dataset.isNonTerminal;let n=d;t&&e?n=c:t?n=l:e&&(n=r),T.style.transform="translate(-50%, -50%)",T.style.width=T.getAttribute("data-default-size-px")+"px",T.style.height=T.getAttribute("data-default-size-px")+"px",T.style.backgroundColor=n}if(T=null,b=null,0===n.length)return void x.querySelectorAll("[data-title-for]").forEach(t=>t.style.opacity="0");const a=n[0],o=a.dataset.path.split("+");if(a.style.transform="translate(-50%, -50%) scale(1.2)",a.style.backgroundColor=u,a.style.width="75px",a.style.height="75px",T=a,"true"===a.dataset.isTerminal){const t=x.querySelector(`[data-title-for="${a.dataset.key}"]`);t&&(t.style.opacity="1"),a.dataset.action&&(b=a.dataset.action)}const s="true"===a.dataset.isNonTerminal;if(w="true"===a.dataset.isTerminal&&s?{x:parseFloat(a.style.left)+parseFloat(x.style.left),y:parseFloat(a.style.top)+parseFloat(x.style.top),action:a.dataset.action,path:a.dataset.path}:null,s&&(o.length>v.length||!o.every((t,e)=>t===v[e]))){const t=parseFloat(a.style.left)+parseFloat(x.style.left),e=parseFloat(a.style.top)+parseFloat(x.style.top);v=o,A(v).length>0&&setTimeout(()=>F(t,e,v),10)}};E&&document.addEventListener("touchstart",t=>{if(E&&1===m){const e=setTimeout(()=>{1===m&&(document.body.classList.add("gesture-active"),setTimeout(()=>{f||document.body.classList.remove("gesture-active")},a))},50);t.target._selectionTimer=e}},{passive:!1}),M||(document.addEventListener("mousedown",async e=>{const n=(new Date).getTime(),i=e.clientX,l=e.clientY;if(f)return void S(i,l);const r=n-y,c=Math.hypot(i-h,l-g);r>0&&r<a&&c<o?(m=2,p=setTimeout(async()=>{f=!0,k(!0),v=[];try{C=await t(),F(i,l,v)}catch(t){console.error("Failed to get options map1"),L()}},s)):m=1,y=n,h=i,g=l}),document.addEventListener("mousemove",t=>{f&&S(t.clientX,t.clientY)}),document.addEventListener("mouseup",t=>{if(clearTimeout(p),f){const e=document.elementsFromPoint(t.clientX,t.clientY).find(t=>t.dataset&&void 0!==t.dataset.key&&"true"===t.dataset.isTerminal);let a=null,o=null;e&&e.dataset.action?(a=e.dataset.action,o=e.dataset.path):w&&Math.hypot(t.clientX-w.x,t.clientY-w.y)<30&&(a=w.action,o=w.path),a&&n(a),L()}else 2===m&&(m=0)})),document.addEventListener("touchstart",async e=>{if(f){e.preventDefault();const t=P(e);return void S(t.x,t.y)}const n=P(e),i=(new Date).getTime(),l=i-y,r=Math.hypot(n.x-h,n.y-g);l>0&&l<a&&r<o?(m=2,E&&k(!0),p=setTimeout(async()=>{f=!0,k(!0),v=[];try{C=await t(),F(n.x,n.y,v)}catch(t){console.error("Failed to get options map2"),L()}},s)):m=1,y=i,h=n.x,g=n.y},{passive:!1}),document.addEventListener("touchmove",t=>{if(1===m&&!f&&t.target._selectionTimer){const e=P(t);Math.hypot(e.x-h,e.y-g)>15&&(clearTimeout(t.target._selectionTimer),document.body.classList.remove("gesture-active"))}if(!f)return;t.preventDefault();const e=P(t);S(e.x,e.y)},{passive:!1}),document.addEventListener("touchend",t=>{if(clearTimeout(p),f){t.preventDefault();const e=P(t),a=document.elementsFromPoint(e.x,e.y).find(t=>t.dataset&&void 0!==t.dataset.key&&"true"===t.dataset.isTerminal);let o=null,s=null;a&&a.dataset.action?(o=a.dataset.action,s=a.dataset.path):w&&Math.hypot(e.x-w.x,e.y-w.y)<30&&(o=w.action,s=w.path),o&&n(o),L()}else 2===m&&(m=0,E&&k(!1))},{passive:!1})})(async()=>{e=await MineTm.CommandBar.getCommands();const t={};return e.filter(t=>t.hotkeySequence).filter(t=>MineTm.originalMineCommandBar.isCurrentUrlMatchedByPattern(t.site)).filter(t=>!t.unsupportedPlatforms||!t.unsupportedPlatforms.includes(MineTm.CommandBarPlatforms.MOBILE)).forEach(e=>t[e.title]=e.hotkeySequence),t},{fanRadius:110,nonTerminalColor:"#2e86c1",dualPurposeColor:"#17a589",terminalColor:"#0b5345",defaultColor:"rgba(45, 45, 50, 0.85)",highlightColor:"rgba(255, 171, 64, 0.9)"},async n=>{const a=e.find(t=>t.title===n);try{await a.run({getShouldInterruptAsync:()=>!1,setStatus:t.noop})}catch(e){t.toastError(`Error running command: ${e}`)}})};main1().then();